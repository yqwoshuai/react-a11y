var e=Object.assign;import{D as t,a}from"./vendor.fa9f54c8.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(a){const n=new URL(e,location),l=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((a,s)=>{const o=new URL(e,n);if(self[t].moduleMap[o])return a(self[t].moduleMap[o]);const r=new Blob([`import * as m from '${o}';`,`${t}.moduleMap['${o}']=m;`],{type:"text/javascript"}),c=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(r),onerror(){s(new Error(`Failed to import: ${e}`)),l(c)},onload(){a(self[t].moduleMap[o]),l(c)}});document.head.appendChild(c)})),self[t].moduleMap={}}}("/assets/");var n=t.memo((function(e){return t.createElement("button",{type:"button",className:"btn toggle-btn","aria-pressed":e.isPressed,onClick:()=>e.setNowTab(e.label)},e.name)}));function l(e){const[a,n]=t.useState(!1),[l,s]=t.useState(""),o=t.useRef(null),r=t.useRef(null),{name:c,id:m,completed:i=!1}=e.item,d=t.createElement("form",{className:"stack-small",onSubmit:t=>{t.preventDefault(),l.trim()&&(e.editTask(m,l),s(""),n(!1))}},t.createElement("div",{className:"from-group"},t.createElement("label",{className:"todo-label",htmlFor:m},"请输入",c,"的新名称"),t.createElement("input",{id:m,className:"todo-text",type:"text",value:l,onChange:e=>{s(e.target.value)},ref:o})),t.createElement("div",{className:"btn-group"},t.createElement("button",{type:"button",className:"btn todo-cancel",onClick:()=>{n(!1)}},"取消",t.createElement("span",{className:"visually-hidden"},c," 任务的重命名")),t.createElement("button",{type:"submit",className:"btn btn__primary todo-edit"},"保存",t.createElement("span",{className:"visually-hidden"},c," 任务的新名称")))),u=t.createElement("div",{className:"stack-small"},t.createElement("div",{className:"c-cb"},t.createElement("input",{id:m,type:"checkbox",defaultChecked:i,onChange:()=>e.toggleTaskCompleted(m),onKeyDown:t=>{13===t.keyCode&&(t.target.checked=!t.target.checked,e.toggleTaskCompleted(m))}}),t.createElement("label",{className:"todo-label",htmlFor:m},c)),t.createElement("div",{className:"btn-group"},t.createElement("button",{type:"button",className:"btn",onClick:()=>n(!0),ref:r},"编辑 ",t.createElement("span",{className:"visually-hidden"},c)),t.createElement("button",{type:"button",className:"btn btn__danger",onClick:()=>e.deleteTask(m)},"删除 ",t.createElement("span",{className:"visually-hidden"},c)))),p=function(e){const a=t.useRef();return t.useEffect((()=>{a.current=e})),a.current}(a);return t.useEffect((()=>{!p&&a&&o.current.focus(),p&&!a&&r.current.focus()}),[a,p]),0===e.nowTab||!i&&1===e.nowTab||i&&2===e.nowTab?t.createElement("li",{className:"todo"},a?d:u):null}function s(e){const[a,n]=t.useState("");return t.createElement("form",{onSubmit:t=>{t.preventDefault(),a.trim()&&(n(""),e.addTask(a))}},t.createElement("h2",{className:"label-wrapper"},t.createElement("label",{className:"label__lg",htmlFor:"new-todo-input"},"请输入代办事项内容")),t.createElement("input",{type:"text",id:"new-todo-input",className:"input input__lg",name:"text",autoComplete:"off",value:a,onChange:e=>{n(e.target.value)}}),t.createElement("button",{type:"submit",className:"btn btn__primary btn__lg"},"添加"))}const o=[{name:"全部任务",label:0},{name:"进行中",label:1},{name:"已完成",label:2}];function r(a){const[r,c]=t.useState(a.taskList),[m,i]=t.useState(0),d=t.useRef(null),u=e=>{window.localStorage.setItem("reactA11yTaskList",JSON.stringify(e)),c(e)},p=t=>{const a=r.map((a=>a.id===t?e(e({},a),{completed:!a.completed}):a));u(a)},b=e=>{const t=r.filter((t=>t.id!==e));u(t),d.current.focus()},f=(t,a)=>{const n=r.map((n=>n.id===t?e(e({},n),{name:a}):n));u(n)},g=e=>{37===e.keyCode&&e.target.previousElementSibling&&e.target.previousElementSibling.focus(),39===e.keyCode&&e.target.nextElementSibling&&e.target.nextElementSibling.focus()};return t.createElement("div",{className:"todoapp stack-large"},t.createElement(s,{addTask:e=>{const t={id:Date.now(),name:e,completed:!1},a=[...r,t];u(a)}}),t.createElement("div",{className:"filters btn-group stack-exception",tabIndex:"-1",onFocus:()=>{window.addEventListener("keydown",g,!1)},onBlur:()=>{window.removeEventListener("keydown",g)}},o.map(((e,a)=>t.createElement(n,{key:a,name:e.name,label:e.label,isPressed:a===m,setNowTab:i})))),t.createElement("h2",{id:"list-heading",tabIndex:"-1",ref:d},"剩余",r.filter((e=>!e.completed)).length,"条任务未完成"),t.createElement("ul",{role:"list",className:"todo-list stack-large stack-exception","aria-labelledby":"list-heading",tabIndex:"-1"},r.map((e=>t.createElement(l,{key:e.id,item:e,nowTab:m,editTask:f,deleteTask:b,toggleTaskCompleted:p})))))}let c=[];window.localStorage.getItem("reactA11yTaskList")&&(c=JSON.parse(window.localStorage.getItem("reactA11yTaskList"))),a.render(t.createElement(t.StrictMode,null,t.createElement(r,{taskList:c})),document.getElementById("root"));
